(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1284:(e,a,r)=>{Promise.resolve().then(r.bind(r,3414))},2353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},3414:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var s=r(5155);r(9324);var t=r(2353),n=r.n(t),o=r(7275),i=r.n(o),l=r(5112);function c(e){let{children:a}=e;return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:"".concat(n().variable," ").concat(i().variable," antialiased"),children:(0,s.jsx)(l.O,{children:a})})})}},5112:(e,a,r)=>{"use strict";r.d(a,{O:()=>u,A:()=>h});var s=r(5155),t=r(2115),n=r(5695),o=r(3464);let i=(0,r(851).UU)("https://zfodljvahdxaaihgtcfo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inpmb2RsanZhaGR4YWFpaGd0Y2ZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ0NDg1MjQsImV4cCI6MjA2MDAyNDUyNH0.m24K7-5fJ33jw9ZR-SA2-ZOxrB5xRBu3ZKDoYh2ndn8"),l=(0,t.createContext)(void 0),c=["/dashboard","/posts","/profile"];function u(e){let{children:a}=e,[r,u]=(0,t.useState)(null),[h,d]=(0,t.useState)(!0),f=(0,n.useRouter)(),m=(0,n.usePathname)();(0,t.useEffect)(()=>{d(!0);let e=localStorage.getItem("authUser");if(e)try{u(JSON.parse(e))}catch(e){console.error("Error parsing saved user:",e),localStorage.removeItem("authUser")}d(!1)},[]),(0,t.useEffect)(()=>{!c.some(e=>null==m?void 0:m.startsWith(e))||h||r||f.push("/")},[m,h,r,f]);let p=async(e,a)=>{try{d(!0);let r=await o.A.post("/api/auth/signin",{email:e,password:a}),s=r.data;if(r.data.user)u(r.data.user),localStorage.setItem("authUser",JSON.stringify(r.data.user)),await i.auth.setSession({access_token:s.session.access_token,refresh_token:s.session.refresh_token});else throw Error("Invalid credentials");return}catch(e){throw console.error("Error signing in:",e),e}finally{d(!1)}},v=async(e,a,r)=>{try{d(!0);let s=await o.A.post("/api/auth/signup",{email:e,password:a,name:r||e.split("@")[0]});if(s.data.success)return{success:!0};return{success:!1,error:s.data.error||"Registration failed"}}catch(e){var s,t;return console.error("Error signing up:",e),{success:!1,error:(null==(t=e.response)||null==(s=t.data)?void 0:s.error)||e.message||"Registration failed"}}finally{d(!1)}},_=async()=>{try{u(null),localStorage.removeItem("authUser"),f.push("/")}catch(e){throw console.error("Error signing out:",e),e}};return(0,s.jsx)(l.Provider,{value:{user:r,isLoading:h,signIn:p,signUp:v,signOut:_,isAuthenticated:!!r},children:a})}function h(){let e=(0,t.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}},9324:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[519,464,125,441,684,358],()=>a(1284)),_N_E=e.O()}]);