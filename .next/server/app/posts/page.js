(()=>{var e={};e.id=530,e.ids=[530],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29664:(e,s,t)=>{Promise.resolve().then(t.bind(t,47843))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},42816:(e,s,t)=>{Promise.resolve().then(t.bind(t,91849))},47843:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(60687),l=t(43210),a=t(30474),i=t(85814),o=t.n(i),n=t(16189),d=t(51060),c=t(80317),u=t(24341);let m=[{id:1,title:"New Summer Menu Launch",description:"Check out our refreshing new summer items!",imageUrl:"https://placehold.co/600x400",status:"published",scheduledFor:"2023-06-15T10:00:00Z",engagement:{likes:45,comments:12,shares:8}},{id:2,title:"Weekend Special: 20% Off",description:"Join us this weekend for special discounts on all desserts",imageUrl:"https://placehold.co/600x400",status:"draft",scheduledFor:"2023-06-18T09:00:00Z",engagement:{likes:0,comments:0,shares:0}},{id:3,title:"Meet Our Chef Series",description:"Get to know the talented individuals behind your favorite dishes",imageUrl:"https://placehold.co/600x400",status:"draft",scheduledFor:null,engagement:{likes:0,comments:0,shares:0}}];function h(){let[e,s]=(0,l.useState)(m),[t,i]=(0,l.useState)("all"),[h,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)(null);(0,n.useRouter)(),(0,n.useSearchParams)();let{user:f,isLoading:v}=(0,u.A)(),j="all"===t?e:e.filter(e=>e.status===t),y=async()=>{try{console.log("Fetching posts...");let e=JSON.parse(localStorage.getItem("authUser")??""),t=await d.A.get("/api/posts",{headers:{userId:e.id}});t.data.posts&&s(t.data.posts)}catch(e){console.error("Error fetching posts:",e)}},w=e=>{b(e),p(!0)},N=()=>{b(null),p(!0)},k=()=>{p(!1),b(null)},C=async e=>{try{g?(console.log("Updating post:",g.id),await d.A.put("/api/posts",{id:g.id,...e,status:e.scheduledFor?"scheduled":g.status})):(console.log("Creating new post"),await d.A.post("/api/posts",{...e,status:e.scheduledFor?"scheduled":"draft"})),y()}catch(e){console.error("Error saving post:",e)}finally{k()}},P=async e=>{try{console.log("Deleting post:",e),await d.A.delete(`/api/posts?id=${e}`),y()}catch(e){console.error("Error deleting post:",e)}};return v?(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}):(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(o(),{href:"/dashboard",className:"text-gray-500 hover:text-gray-700 mr-4",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Posts"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"+ Create New Post"}),(0,r.jsx)(c.A,{})]})]})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>i("all"),className:`px-3 py-2 rounded-md text-sm font-medium ${"all"===t?"bg-blue-100 text-blue-800":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"All Posts"}),(0,r.jsx)("button",{onClick:()=>i("published"),className:`px-3 py-2 rounded-md text-sm font-medium ${"published"===t?"bg-green-100 text-green-800":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Published"}),(0,r.jsx)("button",{onClick:()=>i("draft"),className:`px-3 py-2 rounded-md text-sm font-medium ${"draft"===t?"bg-yellow-100 text-yellow-800":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Drafts"}),(0,r.jsx)("button",{onClick:()=>i("scheduled"),className:`px-3 py-2 rounded-md text-sm font-medium ${"scheduled"===t?"bg-purple-100 text-purple-800":"bg-white text-gray-700 hover:bg-gray-100"}`,children:"Scheduled"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",placeholder:"Search posts...",className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),0===j.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No posts found"}),(0,r.jsxs)("p",{className:"text-gray-500 mb-4",children:["You don't have any ","all"!==t?t:""," posts yet."]}),(0,r.jsx)("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Create Your First Post"})]}):(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,r.jsx)("ul",{className:"divide-y divide-gray-200",children:j.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mr-4",children:(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded overflow-hidden",children:e.imageUrl&&(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)(a.default,{src:e.imageUrl.startsWith("http")?e.imageUrl:`https://${e.imageUrl}`,alt:e.title,fill:!0,className:"object-cover"})})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,r.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"published"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"}`,children:"published"===e.status?"Published":"scheduled"===e.status?"Scheduled":"Draft"})]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e.description}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["published"===e.status?"Published on ":"scheduled"===e.status?"Scheduled for ":"Last edited on ",e.scheduledFor?new Date(e.scheduledFor).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not scheduled"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:["published"===e.status&&(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,r.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),e.engagement.likes]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),e.engagement.comments]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})}),e.engagement.shares]})]}),(0,r.jsx)("button",{onClick:()=>w(e),className:"text-sm text-blue-600 hover:text-blue-800",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>P(e.id),className:"text-sm text-red-600 hover:text-red-800",children:"Delete"})]})]})]})]})})},e.id))})})]}),h&&(0,r.jsx)(x,{post:g,onClose:k,onSave:C})]})})}function x({post:e,onClose:s,onSave:t}){let i=(0,n.useSearchParams)(),o=!!e,c=i.get("title"),u=i.get("description"),[m,h]=(0,l.useState)({title:e?.title||c||"",description:e?.description||u||"",imageUrl:e?.imageUrl||"",scheduledFor:e?.scheduledFor||""}),x=e=>{let{name:s,value:t}=e.target;h({...m,[s]:t})},p=async e=>{e.preventDefault(),console.log(m);let s=JSON.parse(localStorage.getItem("authUser")??"");await d.A.post("/api/posts",{formData:m,userId:s.id}),console.log(m),t(m)};return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:o?"Edit Post":"Create New Post"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-500",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:m.title,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter post title",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:m.description,onChange:x,rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter post description",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"Image URL"}),(0,r.jsx)("input",{type:"text",id:"imageUrl",name:"imageUrl",value:m.imageUrl,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter image URL or upload an image"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,r.jsx)("button",{type:"button",className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Upload Image"}),m.imageUrl&&(0,r.jsx)("div",{className:"ml-4 w-16 h-16 bg-gray-200 rounded overflow-hidden",children:(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)(a.default,{src:m.imageUrl.startsWith("http")?m.imageUrl:`https://${m.imageUrl}`,alt:"Post preview",fill:!0,className:"object-cover"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"scheduledFor",className:"block text-sm font-medium text-gray-700",children:"Schedule Post"}),(0,r.jsx)("input",{type:"datetime-local",id:"scheduledFor",name:"scheduledFor",value:m.scheduledFor,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Leave empty to save as draft"})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Update Post":"Create Post"})]})]})]})})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},77468:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=t(65239),l=t(48088),a=t(88170),i=t.n(a),o=t(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d={children:["",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,91849)),"C:\\Users\\Hitesh Meshram\\Downloads\\t2\\t2\\my-app\\app\\posts\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"C:\\Users\\Hitesh Meshram\\Downloads\\t2\\t2\\my-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Hitesh Meshram\\Downloads\\t2\\t2\\my-app\\app\\posts\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/posts/page",pathname:"/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},91849:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Hitesh Meshram\\\\Downloads\\\\t2\\\\t2\\\\my-app\\\\app\\\\posts\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Hitesh Meshram\\Downloads\\t2\\t2\\my-app\\app\\posts\\page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[719,54,658,814,474,783],()=>t(77468));module.exports=r})();